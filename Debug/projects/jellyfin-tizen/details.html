<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moonfin for Tizen - Media Details</title>
    <link rel="stylesheet" href="css/legacy-compat.css">
    <link rel="stylesheet" href="css/details.css">
    <script src="js/tizen-adapter.js" charset="utf-8"></script>
    <script src="js/polyfills.js" charset="utf-8"></script>
    <script src="js/storage.js" charset="utf-8"></script>
    <script src="js/accent-color.js" charset="utf-8"></script>
    <script src="js/ajax.js" charset="utf-8"></script>
    <script src="js/keycodes.js" charset="utf-8"></script>
    <script src="js/jellyfin-api.js" charset="utf-8"></script>
    <script src="js/multi-server.js" charset="utf-8"></script>
    <script src="js/connection-pool.js" charset="utf-8"></script>
    <script src="js/jellyseerr-models.js" charset="utf-8"></script>
    <script src="js/jellyseerr-api.js" charset="utf-8"></script>
    <script src="js/jellyseerr-preferences.js" charset="utf-8"></script>
    <script src="js/track-selector.js" charset="utf-8"></script>
        <script src="js/theme-music-player.js"></script>
        <script src="js/details.js" charset="utf-8"></script>
</head>
<body>
    <!-- Backdrop Background -->
    <div class="backdrop-container">
        <img id="backdropImage" class="backdrop-image" src="" alt="">
        <div class="backdrop-gradient"></div>
    </div>

    <!-- Main Content -->
    <div class="details-container">
        
        <!-- Header with Two-Column Layout -->
        <div class="details-header">
            <!-- Left Column: Info Section -->
            <div class="info-section">
                <h1 id="itemTitle" class="item-title"></h1>
                
                <!-- Person Content: Photo and Description side by side -->
                <div id="personContent" class="person-content" style="display: none;">
                    <img id="personPhoto" class="person-photo" src="" alt="">
                    <p id="personOverview" class="person-overview"></p>
                </div>
                
                <!-- Metadata Info Row -->
                <div class="info-row">
                    <!-- Year -->
                    <div id="itemYear" class="info-badge" style="display: none;"></div>
                    
                    <!-- Official Rating (PG, R, TV-MA, etc.) -->
                    <div id="officialRating" class="info-badge info-badge-pill" style="display: none;"></div>
                    
                    <!-- Runtime -->
                    <div id="itemRuntime" class="info-badge" style="display: none;">
                        <span id="runtimeValue"></span>
                    </div>
                    
                    <!-- Resolution -->
                    <div id="itemResolution" class="info-badge info-badge-pill" style="display: none;"></div>
                    
                    <!-- Video Codec -->
                    <div id="videoCodec" class="info-badge info-badge-pill" style="display: none;"></div>
                    
                    <!-- Audio Codec -->
                    <div id="audioCodec" class="info-badge info-badge-pill" style="display: none;"></div>
                    
                    <!-- Community Rating -->
                    <div id="communityRating" class="info-badge" style="display: none;">
                        <span class="icon-star">‚≠ê</span>
                        <span id="ratingValue"></span>
                    </div>
                    
                    <!-- Critic Rating -->
                    <div id="criticRating" class="info-badge" style="display: none;">
                        <span id="criticIcon"></span>
                        <span id="criticValue"></span>
                    </div>
                    
                    <!-- Jellyseerr Request Status -->
                    <div id="requestStatus" class="info-badge info-badge-request" style="display: none;">
                        <span id="requestStatusIcon">üìã</span>
                        <span id="requestStatusText"></span>
                    </div>
                </div>
                
                <!-- Tagline -->
                <div id="taglineRow" class="tagline-row" style="display: none;">
                    <span id="itemTagline" class="tagline-text"></span>
                </div>
                
                <!-- Description/Overview -->
                <p id="itemOverview" class="item-overview"></p>
                
                <!-- Grouped Metadata Cells -->
                <div id="metadataGroup" class="metadata-group">
                    <!-- Genres -->
                    <div id="genresCell" class="metadata-cell" style="display: none;">
                        <span class="metadata-label">Genres</span>
                        <span id="itemGenres" class="metadata-value"></span>
                    </div>
                    <!-- Director -->
                    <div id="directorCell" class="metadata-cell" style="display: none;">
                        <span class="metadata-label">Director</span>
                        <span id="itemDirector" class="metadata-value"></span>
                    </div>
                    <!-- Writers -->
                    <div id="writersCell" class="metadata-cell" style="display: none;">
                        <span class="metadata-label">Writers</span>
                        <span id="itemWriters" class="metadata-value"></span>
                    </div>
                    <!-- Studios -->
                    <div id="studiosCell" class="metadata-cell" style="display: none;">
                        <span class="metadata-label">Studio</span>
                        <span id="itemStudios" class="metadata-value"></span>
                    </div>
                </div>
            </div>
            
            <!-- Right Column: Logo Only -->
            <div class="logo-section">
                <img id="logoImage" class="logo-image" src="" alt="" style="display: none;">
            </div>
        </div>
        
        <!-- Action Buttons (Full Width) -->
        <div class="action-buttons">
            <div class="btn-wrapper" id="playBtnWrapper">
                <button id="playBtn" class="btn-action btn-play" tabindex="0">
                    <img src="assets/play.png" alt="Play">
                </button>
                <span class="btn-label">Play</span>
            </div>
            <div class="btn-wrapper" style="display: none;" id="resumeBtnWrapper">
                <button id="resumeBtn" class="btn-action btn-secondary" tabindex="0">
                    <img src="assets/resume.png" alt="Resume">
                </button>
                <span class="btn-label">Resume</span>
            </div>
            <div class="btn-wrapper" style="display: none;" id="shuffleBtnWrapper">
                <button id="shuffleBtn" class="btn-action btn-secondary" tabindex="0">
                    <img src="assets/shuffle.png" alt="Shuffle">
                </button>
                <span class="btn-label">Shuffle</span>
            </div>
            <div class="btn-wrapper" style="display: none;" id="trailerBtnWrapper">
                <button id="trailerBtn" class="btn-action btn-secondary" tabindex="0">
                    <img src="assets/trailer.png" alt="Trailer">
                </button>
                <span class="btn-label">Trailer</span>
            </div>
            <div class="btn-wrapper">
                <button id="favoriteBtn" class="btn-action btn-secondary" tabindex="0">
                    <img id="favoriteIcon" src="assets/heart.png" alt="Favorite">
                </button>
                <span class="btn-label">Favorite</span>
            </div>
            <div class="btn-wrapper">
                <button id="markPlayedBtn" class="btn-action btn-secondary" tabindex="0">
                    <img src="assets/watched.png" alt="Watched">
                </button>
                <span class="btn-label" id="playedText">Watched</span>
            </div>
            <div class="btn-wrapper" style="display: none;" id="audioBtnWrapper">
                <button id="audioBtn" class="btn-action btn-secondary" tabindex="0">
                    <img src="assets/select_audio.png" alt="Audio">
                </button>
                <span class="btn-label">Audio</span>
            </div>
            <div class="btn-wrapper" style="display: none;" id="subtitleBtnWrapper">
                <button id="subtitleBtn" class="btn-action btn-secondary" tabindex="0">
                    <img src="assets/subtitle.png" alt="Subtitles">
                </button>
                <span class="btn-label">Subtitles</span>
            </div>
            <div class="btn-wrapper" style="display: none;" id="moreBtnWrapper">
                <button id="moreBtn" class="btn-action btn-secondary" tabindex="0">
                    <img src="assets/more.png" alt="More">
                </button>
                <span class="btn-label">More</span>
            </div>
            <div class="btn-wrapper" style="display: none;" id="requestBtnWrapper">
                <button id="requestBtn" class="btn-action btn-request" tabindex="0">
                    <img src="assets/request_hd.png" alt="Request">
                </button>
                <span class="btn-label">Request</span>
            </div>
            <div class="btn-wrapper" style="display: none;" id="deleteRequestBtnWrapper">
                <button id="deleteRequestBtn" class="btn-action btn-secondary" tabindex="0">
                    <img src="assets/more.png" alt="Cancel Request">
                </button>
                <span class="btn-label">Cancel</span>
            </div>
            <div class="btn-wrapper" style="display: none;" id="goToSeriesBtnWrapper">
                <button id="goToSeriesBtn" class="btn-action btn-secondary" tabindex="0">
                    <img src="assets/request_hd.png" alt="Go to Series">
                </button>
                <span class="btn-label">Go to Series</span>
            </div>
        </div>

        <!-- Additional Information -->
        <div class="details-body">
            
            <!-- Next Up (for TV Series) -->
            <div id="nextUpSection" class="section" style="display: none;">
                <h2 class="section-title">Next Up</h2>
                <div class="nextup-scroller">
                    <div id="nextUpList" class="nextup-list">
                        <!-- Next up episodes will be added here -->
                    </div>
                </div>
            </div>
            
            <!-- Seasons (for TV Shows) -->
            <div id="seasonsSection" class="section" style="display: none;">
                <h2 class="section-title">Seasons</h2>
                <div class="seasons-scroller">
                    <div id="seasonsList" class="seasons-list">
                        <!-- Season items will be added here -->
                    </div>
                </div>
            </div>
            
            <!-- Episodes (for Seasons) -->
            <div id="episodesSection" class="section" style="display: none;">
                <h2 class="section-title">Episodes</h2>
                <div class="episodes-scroller">
                    <div id="episodesList" class="episodes-list">
                        <!-- Episode items will be added here -->
                    </div>
                </div>
            </div>
            
            <!-- Remaining Episodes (for Episode details) -->
            <div id="remainingEpisodesSection" class="section" style="display: none;">
                <h2 class="section-title">Remaining Episodes in Season</h2>
                <div class="episodes-scroller">
                    <div id="remainingEpisodesList" class="episodes-list">
                        <!-- Remaining episode items will be added here -->
                    </div>
                </div>
            </div>
            
            <!-- Cast & Crew -->
            <div id="castSection" class="section" style="display: none;">
                <h2 class="section-title">Cast & Crew</h2>
                <div class="cast-scroller">
                    <div id="castList" class="cast-list">
                        <!-- Cast items will be added here -->
                    </div>
                </div>
            </div>
            
            <!-- Similar Items -->
            <div id="similarSection" class="section" style="display: none;">
                <h2 class="section-title">More Like This</h2>
                <div class="similar-scroller">
                    <div id="similarList" class="similar-list">
                        <!-- Similar items will be added here -->
                    </div>
                </div>
            </div>
            
            <!-- Extras -->
            <div id="extrasSection" class="section" style="display: none;">
                <h2 class="section-title">Extras</h2>
                <div class="extras-scroller">
                    <div id="extrasList" class="extras-list">
                        <!-- Extra items will be added here -->
                    </div>
                </div>
            </div>
        
            
        </div>
        
    </div>

    <!-- Loading Indicator -->
    <div id="loadingIndicator" class="loading-indicator">
        <div class="spinner"></div>
        <p>Loading details...</p>
    </div>

    <!-- Error Display -->
    <div id="errorDisplay" class="error-display" style="display: none;">
        <h2>Unable to load details</h2>
        <p id="errorText"></p>
        <button id="backButton" class="btn-back">Go Back</button>
    </div>

    <!-- Season Selector Modal -->
    <div id="seasonSelectorModal" class="modal-overlay" style="display: none;">
        <div class="modal-content season-selector-modal">
            <h2>Select Seasons to Request</h2>
            <p class="modal-description">Choose which seasons you want to request</p>
            
            <div class="season-selector-options">
                <button class="season-option-btn active" id="allSeasonsBtn" data-value="all" tabindex="0">
                    <span class="option-icon">‚úì</span>
                    <span class="option-label">All Seasons</span>
                </button>
                <button class="season-option-btn" id="firstSeasonBtn" data-value="first" tabindex="0">
                    <span class="option-icon"></span>
                    <span class="option-label">First Season Only</span>
                </button>
                <button class="season-option-btn" id="latestSeasonBtn" data-value="latest" tabindex="0">
                    <span class="option-icon"></span>
                    <span class="option-label">Latest Season Only</span>
                </button>
            </div>
            
            <div class="season-list" id="seasonCheckboxList">
                <!-- Individual season checkboxes will be added here -->
            </div>
            
            <div class="modal-actions">
                <button class="btn-primary" id="confirmRequestBtn" tabindex="0">Request Selected</button>
                <button class="btn-secondary" id="cancelRequestBtn" tabindex="0">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Audio Track Selection Modal -->
    <div id="audioModal" class="track-modal">
        <div class="modal-content">
            <h2 class="modal-title">Available Audio Tracks</h2>
            <div id="audioTrackList" class="track-list"></div>
        </div>
    </div>
    
    <!-- Subtitle Track Selection Modal -->
    <div id="subtitleModal" class="track-modal">
        <div class="modal-content">
            <h2 class="modal-title">Available Subtitles</h2>
            <div id="subtitleTrackList" class="track-list"></div>
        </div>
    </div>
</body>
</html>
